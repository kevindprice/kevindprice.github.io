<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>An Artificial Gravity Computer Model, in React / Kevin Price</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" href="./theme/favicon.ico" />
        <link rel="apple-touch-icon" href="./theme/apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="./theme/apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="./theme/apple-touch-icon-iphone4.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="./theme/apple-touch-icon-ipad3.png" />

        <link rel="stylesheet" href="./theme/css/bootstrap.min.css">
        <link rel="stylesheet" href="./theme/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="./theme/css/font-awesome.min.css">
        <link rel="stylesheet" href="./theme/css/colorbox.css">

        <link rel="stylesheet" href="./theme/css/main.css">

        <script src="./theme/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div class="span9">
                    <div class="row">
                        <div class="span2"> <!-- logo -->
                            <div id="logo">
                                <a href=".">
                                    <img alt="Kevin Price" src=".//images/me.jpg" />
                                </a>
                            </div> <!-- logo -->
                        </div> <!-- logo span -->
						
                        <div class="span7"> <!-- header -->
                            <!--[if lt IE 9]>
                                <p class="chromeframe alert alert-warning">You are using an <strong>outdated</strong> browser, and this site might not look best in it. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
                            <![endif]-->
                            <header id="site-header">
                                <div id="site-header-content">
                                    <h1>
                                        <a href=".">Kevin Price</a>
                                        <small>
                                            <span class="divider">/</span> 
                                        </small>
                                    </h1>
                                    <p>
                                        I am a computer programmer interested in web development. Here are some of my projects and ideas.
                                    </p>
                                </div>
                            </header>
                        </div> <!-- header span -->
                    </div> <!-- header row -->

                    <div class="row"> <!-- content -->
                        <div class="content">
<div class="article-page">
    <div class="span7 offset2">
        <header class="article">
            <h2><a href="./react.html" rel="bookmark">An Artificial Gravity Computer Model, in React</a></h2>
			<div style="display:inline-block; margin-top: 3px; font-family: Baskerville, Garamond, Palatino;">— Web Design —&nbsp;&nbsp;</div>
            <time datetime="2017-08-31T00:00:00-04:00">
                Aug 31, 2017
            </time>
        </header>
    </div>

    <div class="span2">
    <div class="article-meta article-meta-border">
        <dl class="dl-horizontal">
            <dt><i class="icon-file"></i></dt>
            <dd>
                <a href="./category/web-design.html">
                    Web Design
                </a>
            </dd>

            <dt><i class="icon-tags"></i></dt>
            <dd>
                    <a href="./tag/computer-modeling.html">Computer Modeling</a>
<span class="separator">/</span>                    <a href="./tag/react.html">React</a>
<span class="separator">/</span>                    <a href="./tag/javascript.html">JavaScript</a>
            </dd>
        </dl>

        <b class="border-notch notch"></b>
        <b class="notch"></b>
    </div>
    </div>

    <div class="span7">
        <section>
            <article class="entry">
    <!-- Summary:  -->

<p>If you were to toss a coin on an artificial gravity space station, where would it end up? If you try my new <a href="https://coriolis-station.netlify.app">computer model</a>, you will discover that it won't land at your feet where you expect it to. I created this React web app to demonstrate the Coriolis effect, which would be apparent in artificial gravity. This model is clean and powerful, and it teaches a complicated Physics principle in a simple way.</p>
<p>I am very pleased with the result, the product of many months of work. This page is both a computer model and an article. The following text describes some of the steps I took to generate this model.</p>


<h3>Coding goals</h3>
<p>The Coriolis effect fascinates me. As I stated in <a href="./coriolis">my article</a>, the Coriolis effect is an artifact of rotating environments (artificial gravity) that causes objects to move in unexpected directions.</p>
<p>My goal was to take this complicated physics principle and simplify it so that anyone can understand it. I wanted the model to be powerful enough to be able to render whatever throw a user wishes to model. With this objective, I hoped to make the effects of artificial gravity perfectly clear. Furthermore, I wanted the page to be compelling, clean, intuitive, understandable, beautiful, fast, resizable, mobile-friendly, and not glitchy.</p>
<h3>Steps to produce the model</h3>
<p>This model came about in several stages. This came from a simple idea, though the final result is much more sophisticated and powerful than what I had initially planned.</p>
<ol>
<li>
<p>The first stage of this model was to calculate the landing position of the outer space coin toss, so I could quantify how "weird" the toss is. The model needed to <em>compute</em> these coordinates for the viewer. Finding these coordinates involves finding the correct intersection between a line and a circle; the direction of this line is based on physics kinematics equations. <a href="./coriolis/math.html">This</a> explains the math I used.</p>
</li>
<li>
<p>With the landing coordinates, I could calculate the distance the coin would land away from the person; this is the measurable result of the Coriolis effect. I wrote the math <a href="images/CoriolisTable.py">into Python code</a> to generate a graph that shows the relationship between the diameter of the station and the "weirdness" of the throw produced by the Coriolis effect. These graphs assume the coin was tossed from four feet up to a total height of 7 feet.</p>
</li>
<li>
<p>I wanted to demonstrate what any throw would <em>look</em> like. Using the line of the coin's movement, I generated a time series of points, allowing me to plot these points on an HTML canvas element.</p>
</li>
<li>
<p>These points needed to be in the <em>thrower's</em> reference frame, not the frame of the outside universe. This is the only way the Coriolis effect would be clearly demonstrated. This required me to translate my series of points into a new set of points that are <em>relative</em> to the thrower. This required writing out more equations and solving a bit of trigonometry.</p>
</li>
<li>
<p>I wrote an article about the Coriolis effect and placed it overtop the model. I wanted this article to be complete, understandable, informative, and entertaining. I filled the article with photoshopped images and homemade giphys, and I made the article interactive with the model.</p>
</li>
<li>
<p>Next, I wanted to improve the model's UI to make it clean and professional. I rewrote the model to utilize the React framework. I added intuitive logarithmic sliders so that it would be easy to change the throw's parameters.</p>
</li>
<li>
<p>I continued debugging the code and adding more use cases.</p>
</li>
</ol>
<h3>Some things I encountered while coding</h3>
<h5>Article Overlay</h5>
<p>This React webpage is both a model and an article. I wanted the article to be interactive with the model I was creating! I generated the article as a React component, in Markdown.</p>
<p>I found a fantastic React package, <em>markdown-it-jsx</em>, which allowed me to embed React components directly into Markdown while rendering the text. Without this package, my interactive "Try it!" buttons would be much more difficult to create. <em>markdown-it-jsx</em> converts the Markdown to .jsx, which I then convert into live components using the babel-standalone package after loading. Rendering this way also allows me to completely bybass React's "dangerouslysetinnerhtml" construct, which would be a security vulerability. Other React markdown renderers use this construct to embed the text.</p>
<p>This configuration forced me to change the webpack configuration. This was somewhat tricky because create-react-app, which I was using, automatically configures webpack. "Ejecting" from their config requires more manual upkeep. I wanted to use the "raw-loader" in webpack so I could load markdown files as raw text. This would allow me to process them with <em>markdown-it-jsx</em>. <em>react-app-rewired</em> solved this problem by allowing me to edit the webpack configuration in create-react-app without ejecting.</p>
<h5>Insufficient Decimal Places</h5>
<p>I discovered that the standard number variable in Python and JavaScript is not accurate enough to calculate the results that I desired. Fifteen decimal places produces glitchy results with large "space stations." Thus, I translated all of my math to work with the Decimal.js JavaScript library and the Python Decimal package. Then, I increased the number of decimal places so I could model larger space stations.</p>
<p>Here is my glitchy graph with the standard number of decimal places. The graph never reaches the correct values for stations that are larger than a million meters:</p>
<p><img style="margin: 5px 0px 5px 0px;" src="images/CoriolisGraphGlitchy.png" width="525" height="525"/></p>
<p>With additional decimal places:</p>
<p><img style="margin: 5px 0px 5px 0px;" src="images/CoriolisGraph.png" width="525" height="525"/></p>
<p>The Python code I wrote to generate these graphs can be found <a href="images/CoriolisTable.py">here</a>.</p>
<p>In JavaScript, the current version of the Decimal.js package does not work with webpack. Thus, in order to use the model with React, I needed to downgrade the package. This issue is discussed <a href="https://github.com/MikeMcl/decimal.js/issues/49">here</a>.</p>
<h5>A Hidden Feature: Querystrings</h5>
<p>Just in case I want to prove to someone else something about the Coriolis effect, I added the ability to <em>open</em> the model page with specific settings in a linkable way. Likely, this feature will never be used. However, here are some of the possible querystrings one could use:</p>
<p>Self-explanatory features:</p>
<ul>
<li>diameter</li>
<li>radius</li>
<li>percenttime</li>
<li>startheight</li>
<li>gravity</li>
<li>speed   (of the coin)</li>
<li>angle</li>
<li>units (either ft, feet, imperial, metric, meters, or m)</li>
</ul>
<p>Other features:</p>
<ul>
<li>thrownUp: another hidden feature. Instead of specifying the angle and speed, you can simply tell it how high you would have thrown the coin on Earth (assuming angle 0 if you do not specify, though you are not required to assume that).</li>
<li>statsMenu: just in case I want to more determinedly prove something, I could have it open the model <em>with</em> the statistics menu open. Possible values: either just "&amp;statsMenu" or "&amp;statsMenu=true".</li>
<li>inputMenu: since I added a similar feature for the stats menu, it makes sense to add one for the input menu too.</li>
</ul>
<h5>Logarithmic Sliders</h5>
<p>I wanted to produce logarithmic sliders for the model's input. This way, it would be intuitive what ranges are acceptable. I found the logic I needed at <a href="https://codepen.io/willat600series/pen/ojzYJx">this site</a>.</p>
<p>My logarithmic ranges needed to <em>include</em> zero. The log of zero does not normally compute! My code uses an offset to ensure the number it calculates the log of is never actually zero.</p>
<h5>A Resizeable React canvas</h5>
<p>I wanted the model to be compatible with any screen size presented to it. Thus, I needed to create an HTML canvas element that both fills the screen width and resizes. The canvas must receive its with from the properties, not from CSS.</p>
<p><a href="https://www.npmjs.com/package/react-container-dimensions">This React plugin</a> initially looked like it would do the job, but it proved useless. Canvas elements must be connected to React refs in order to obtain the drawing context from ReactDOM. This is not possible with functional components, which the react-container-dimensions plugin uses.</p>
<p>I ultimately created an event listener in the Canvas component which triggers a state change when the window is resized. The Canvas then inherits its width and height attributes from the component's state.</p>
<h3>Conclusion</h3>
<p>This was a very fun, but involved project. I was happy to find some simple solutions to my complex coding problems. I hope I taught you something about artificial gravity!</p>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'priceisright204'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
		(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');
			s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </article>
        </section>
    </div> <!-- span -->
</div>                        </div>
                    </div> <!-- content row -->

                    <div class="row"> <!-- footer -->
                        <div class="span7 offset2">
                            <footer id="site-footer">
                                <p>
                                    <a href="" target="_blank">
                                        
                                    </a> Kevin Price /
                                    <a href="./">Archives</a>
                                </p>
                                <p>
                                    Powered by
                                    <a href="https://github.com/getpelican/pelican" target="_blank">
                                        Pelican
                                    </a>
                                    /
                                    My code on
                                    <a href="http://github.com/kevindprice" target="blank">
                                        GitHub
                                    </a>
                                    /
                                    Modified <code>Lannisport</code> theme
                                </p>
                            </footer>
                        </div> <!-- footer span -->
                    </div> <!-- footer row -->
                </div> <!-- header+content+footer span -->

                <div class="span3">
                    <aside class="affix">
                        <div id="sidebar">
                            <div id="social-icons">
                                    <span class="social-icon">
                                        <a href="https://github.com/kevindprice" target="_blank" title="GitHub">
                                            <i class="icon-github-alt"></i>
                                        </a>
                                    </span>
                                    <span class="social-icon">
                                        <a href="https://www.linkedin.com/in/kevin-price-371a9a6b" target="_blank" title="LinkedIn">
                                            <i class="icon-linkedin"></i>
                                        </a>
                                    </span>
                                    <span class="social-icon">
                                        <a href="http://facebook.com/kevin.price.204" target="_blank" title="Facebook">
                                            <i class="icon-facebook"></i>
                                        </a>
                                    </span>
                            </div>

                            <div id="navigation">
<nav>
	<h2>Pages</h2>
	<ul>
		<li>
			<ul>
				<li>
					<a href=".">Site Home</a>
				</li>

					</br><li><a href="https://coriolis-station.netlify.app" target="_blank">Artificial Gravity Model</a></li>
					</br><li><a href="./coriolis" target="_blank">Read about Spinning to Create Gravity</a></li>
					</br><li><a href="./maze#&tutorial=true" target="_blank">Maze</a></li>
					</br><li><a href="./states" target="_blank">Comparing the United States</a></li>
					</br><li><a href="https://erinpricewrites.github.io" target="_blank">Erin Price's Author Website</a></li>
					</br><li><a href="./photos/nature.html" target="_blank">Photography</a></li>

			</ul>
		</li>
	</ul>
</nav>
<!--
<nav>
	<h2>Categories</h2>
	<ul>
		<li>
			<ul>
					</br><li>
						<a href="./category/about-this-site.html">About this site</a>
					</li>
					</br><li>
						<a href="./category/data-analysis.html">Data Analysis</a>
					</li>
					</br><li>
						<a href="./category/games.html">Games</a>
					</li>
					</br><li>
						<a href="./category/machine-learning.html">Machine Learning</a>
					</li>
					</br><li>
						<a href="./category/web-design.html">Web Design</a>
					</li>
			</ul>
		</li>
	</ul>
</nav>
-->                            </div>
                        </div> <!-- sidebar -->

                        <p id="back-to-top">
                            <a href="#">
                                <i class="icon-double-angle-up"></i> Back to top
                            </a>
                        </p>

                    </aside>
                </div> <!-- logo+navigation span -->
            </div> <!-- row -->

        </div> <!-- /container -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="./theme/js/vendor/jquery-3.2.1.min.js"><\/script>')</script>

        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
        <script>$('body').popover || document.write('<script src="./theme/js/vendor/bootstrap.min.js"><\/script>')</script>

        <script src="./theme/js/jquery.captions.js"></script>
        <script src="./theme/js/vendor/jquery.colorbox-min.js"></script>

        <script src="./theme/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-104695649-1'],['_trackPageview'],['_trackPageLoadTime'],['_gat._anonymizeIp']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>